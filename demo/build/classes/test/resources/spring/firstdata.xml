<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:p="http://www.springframework.org/schema/p"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:oxm="http://www.springframework.org/schema/oxm"
	xsi:schemaLocation="
		http://www.springframework.org/schema/beans
		http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
		http://www.springframework.org/schema/oxm
		http://www.springframework.org/schema/oxm/spring-oxm-3.2.xsd"
			default-autowire="no">
	
	<oxm:jaxb2-marshaller id="firstDataMarshaller">
	    <oxm:class-to-be-bound name="net.linkpt.secure.fdggwsapi.schemas_us.fdggwsapi.FDGGWSApiOrderRequest"/>
		<oxm:class-to-be-bound name="net.linkpt.secure.fdggwsapi.schemas_us.fdggwsapi.FDGGWSApiOrderResponse"/>
		<oxm:class-to-be-bound name="net.linkpt.secure.fdggwsapi.schemas_us.v1.CreditCardTxType"/>
		<oxm:class-to-be-bound name="net.linkpt.secure.fdggwsapi.schemas_us.v1.CreditCardData"/>
		<oxm:class-to-be-bound name="net.linkpt.secure.fdggwsapi.schemas_us.v1.Payment"/>
		<oxm:class-to-be-bound name="net.linkpt.secure.fdggwsapi.schemas_us.v1.Transaction">
	</oxm:jaxb2-marshaller>

	<bean id="webServiceTemplate" class="org.springframework.ws.client.core.WebServiceTemplate">
		<constructor-arg>
			<bean id="messageFactory" class="org.springframework.ws.soap.saaj.SaajSoapMessageFactory"/>
		</constructor-arg>
		<property name="marshaller" ref="firstDataMarshaller"/>
		<property name="unmarshaller" ref="firstDataMarshaller"/>
		<property name="messageSender">
			<bean class="org.springframework.ws.transport.http.CommonsHttpMessageSender">
				<property name="credentials">
					<bean class="org.apache.commons.httpclient.UsernamePasswordCredentials">
						<constructor-arg value="${payment.adapter.firstdata.username}"/>
						<constructor-arg value="${payment.adapter.firstdata.password}"/>
					</bean>
				</property>
			</bean>
		</property>
		<property name="destinationProvider">
			<bean class="org.springframework.ws.client.support.destination.Wsdl11DestinationProvider">
				<property name="wsdl" value="${payment.adapter.firstdata.wsdl}"/>
			</bean>
		</property>
	</bean>
</beans>